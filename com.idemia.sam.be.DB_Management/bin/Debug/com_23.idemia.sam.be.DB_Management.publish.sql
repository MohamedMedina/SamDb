/*
Deployment script for SAM_DB

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.
*/

GO
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;

SET NUMERIC_ROUNDABORT OFF;


GO
:setvar DatabaseName "SAM_DB"
:setvar DefaultFilePrefix "SAM_DB"
:setvar DefaultDataPath "C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\DATA\"
:setvar DefaultLogPath "C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\DATA\"

GO
:on error exit
GO
/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/
:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END


GO
USE [master];


GO

IF (DB_ID(N'$(DatabaseName)') IS NOT NULL) 
BEGIN
    ALTER DATABASE [$(DatabaseName)]
    SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
    DROP DATABASE [$(DatabaseName)];
END

GO
PRINT N'Creating $(DatabaseName)...'
GO
CREATE DATABASE [$(DatabaseName)]
    ON 
    PRIMARY(NAME = [$(DatabaseName)], FILENAME = N'$(DefaultDataPath)$(DefaultFilePrefix)_Primary.mdf')
    LOG ON (NAME = [$(DatabaseName)_log], FILENAME = N'$(DefaultLogPath)$(DefaultFilePrefix)_Primary.ldf') COLLATE SQL_Latin1_General_CP1_CI_AS
GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET AUTO_CLOSE OFF 
            WITH ROLLBACK IMMEDIATE;
    END


GO
USE [$(DatabaseName)];


GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET ANSI_NULLS ON,
                ANSI_PADDING ON,
                ANSI_WARNINGS ON,
                ARITHABORT ON,
                CONCAT_NULL_YIELDS_NULL ON,
                NUMERIC_ROUNDABORT OFF,
                QUOTED_IDENTIFIER ON,
                ANSI_NULL_DEFAULT ON,
                CURSOR_DEFAULT LOCAL,
                RECOVERY FULL,
                CURSOR_CLOSE_ON_COMMIT OFF,
                AUTO_CREATE_STATISTICS ON,
                AUTO_SHRINK OFF,
                AUTO_UPDATE_STATISTICS ON,
                RECURSIVE_TRIGGERS OFF 
            WITH ROLLBACK IMMEDIATE;
    END


GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET ALLOW_SNAPSHOT_ISOLATION OFF;
    END


GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET READ_COMMITTED_SNAPSHOT OFF 
            WITH ROLLBACK IMMEDIATE;
    END


GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET AUTO_UPDATE_STATISTICS_ASYNC OFF,
                PAGE_VERIFY NONE,
                DATE_CORRELATION_OPTIMIZATION OFF,
                DISABLE_BROKER,
                PARAMETERIZATION SIMPLE,
                SUPPLEMENTAL_LOGGING OFF 
            WITH ROLLBACK IMMEDIATE;
    END


GO
IF IS_SRVROLEMEMBER(N'sysadmin') = 1
    BEGIN
        IF EXISTS (SELECT 1
                   FROM   [master].[dbo].[sysdatabases]
                   WHERE  [name] = N'$(DatabaseName)')
            BEGIN
                EXECUTE sp_executesql N'ALTER DATABASE [$(DatabaseName)]
    SET TRUSTWORTHY OFF,
        DB_CHAINING OFF 
    WITH ROLLBACK IMMEDIATE';
            END
    END
ELSE
    BEGIN
        PRINT N'The database settings cannot be modified. You must be a SysAdmin to apply these settings.';
    END


GO
IF IS_SRVROLEMEMBER(N'sysadmin') = 1
    BEGIN
        IF EXISTS (SELECT 1
                   FROM   [master].[dbo].[sysdatabases]
                   WHERE  [name] = N'$(DatabaseName)')
            BEGIN
                EXECUTE sp_executesql N'ALTER DATABASE [$(DatabaseName)]
    SET HONOR_BROKER_PRIORITY OFF 
    WITH ROLLBACK IMMEDIATE';
            END
    END
ELSE
    BEGIN
        PRINT N'The database settings cannot be modified. You must be a SysAdmin to apply these settings.';
    END


GO
ALTER DATABASE [$(DatabaseName)]
    SET TARGET_RECOVERY_TIME = 0 SECONDS 
    WITH ROLLBACK IMMEDIATE;


GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET FILESTREAM(NON_TRANSACTED_ACCESS = OFF),
                CONTAINMENT = NONE 
            WITH ROLLBACK IMMEDIATE;
    END


GO
IF fulltextserviceproperty(N'IsFulltextInstalled') = 1
    EXECUTE sp_fulltext_database 'enable';


GO
PRINT N'Creating [Lookups]...';


GO
CREATE SCHEMA [Lookups]
    AUTHORIZATION [dbo];


GO
PRINT N'Creating [Transactions]...';


GO
CREATE SCHEMA [Transactions]
    AUTHORIZATION [dbo];


GO
PRINT N'Creating [Lookups].[UserGroup]...';


GO
CREATE TABLE [Lookups].[UserGroup] (
    [Id]      INT IDENTITY (1, 1) NOT NULL,
    [userId]  INT NOT NULL,
    [groupId] INT NOT NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [Lookups].[User]...';


GO
CREATE TABLE [Lookups].[User] (
    [Id]         INT           IDENTITY (1, 1) NOT NULL,
    [userName]   NVARCHAR (30) NOT NULL,
    [fullName]   NVARCHAR (50) NULL,
    [Password]   NVARCHAR (30) NOT NULL,
    [status]     BIT           NULL,
    [createDate] DATETIME      NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [Lookups].[GroupFunction]...';


GO
CREATE TABLE [Lookups].[GroupFunction] (
    [Id]         INT IDENTITY (1, 1) NOT NULL,
    [functionId] INT NULL,
    [groupId]    INT NULL,
    [status]     BIT NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [Lookups].[Group]...';


GO
CREATE TABLE [Lookups].[Group] (
    [Id]     INT           IDENTITY (1, 1) NOT NULL,
    [name]   NVARCHAR (50) NULL,
    [status] BIT           NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [Lookups].[Function]...';


GO
CREATE TABLE [Lookups].[Function] (
    [Id]     INT            IDENTITY (1, 1) NOT NULL,
    [name]   NVARCHAR (30)  NULL,
    [nameAr] NVARCHAR (30)  NULL,
    [route]  NVARCHAR (MAX) NULL,
    [status] BIT            NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [Lookups].[WorkField]...';


GO
CREATE TABLE [Lookups].[WorkField] (
    [Id]     INT           IDENTITY (1, 1) NOT NULL,
    [name]   NVARCHAR (30) NULL,
    [nameAr] NVARCHAR (30) NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [Lookups].[CardValidity]...';


GO
CREATE TABLE [Lookups].[CardValidity] (
    [Id]     INT           IDENTITY (1, 1) NOT NULL,
    [name]   NVARCHAR (30) NULL,
    [nameAr] NVARCHAR (30) NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [Lookups].[CardType]...';


GO
CREATE TABLE [Lookups].[CardType] (
    [Id]     INT           IDENTITY (1, 1) NOT NULL,
    [name]   NVARCHAR (30) NULL,
    [nameAr] NVARCHAR (30) NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [Lookups].[RejectReason]...';


GO
CREATE TABLE [Lookups].[RejectReason] (
    [Id]     INT           IDENTITY (1, 1) NOT NULL,
    [name]   NVARCHAR (30) NULL,
    [nameAr] NVARCHAR (30) NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [Lookups].[RequestPriority]...';


GO
CREATE TABLE [Lookups].[RequestPriority] (
    [Id]     INT           IDENTITY (1, 1) NOT NULL,
    [name]   NVARCHAR (30) NULL,
    [nameAr] NVARCHAR (30) NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [Lookups].[RequestClass]...';


GO
CREATE TABLE [Lookups].[RequestClass] (
    [Id]     INT           IDENTITY (1, 1) NOT NULL,
    [name]   NVARCHAR (30) NULL,
    [nameAr] NVARCHAR (30) NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [Lookups].[RequestStatus]...';


GO
CREATE TABLE [Lookups].[RequestStatus] (
    [Id]     INT           IDENTITY (1, 1) NOT NULL,
    [name]   NVARCHAR (30) NULL,
    [nameAr] NVARCHAR (30) NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [Lookups].[RequestType]...';


GO
CREATE TABLE [Lookups].[RequestType] (
    [Id]     INT           IDENTITY (1, 1) NOT NULL,
    [name]   NVARCHAR (30) NULL,
    [nameAr] NVARCHAR (30) NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [Transactions].[RequestDetail]...';


GO
CREATE TABLE [Transactions].[RequestDetail] (
    [Id]         INT IDENTITY (1, 1) NOT NULL,
    [quantity]   INT NULL,
    [cardTypeID] INT NULL,
    [requestID]  INT NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [Transactions].[Customer]...';


GO
CREATE TABLE [Transactions].[Customer] (
    [Id]          INT            IDENTITY (1, 1) NOT NULL,
    [code]        NVARCHAR (30)  NULL,
    [name]        NVARCHAR (100) NULL,
    [nameAr]      NVARCHAR (100) NULL,
    [address]     NVARCHAR (100) NULL,
    [phone]       NVARCHAR (20)  NULL,
    [email]       NVARCHAR (100) NULL,
    [workFieldId] INT            NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [Transactions].[Request]...';


GO
CREATE TABLE [Transactions].[Request] (
    [Id]                INT           IDENTITY (1, 1) NOT NULL,
    [requestNumber]     NVARCHAR (10) NOT NULL,
    [totalQuantity]     INT           NULL,
    [PDD]               DATETIME      NULL,
    [customerID]        INT           NULL,
    [creationDate]      DATETIME      NULL,
    [creationUserID]    INT           NULL,
    [approvalDate]      DATETIME      NULL,
    [approvalUserID]    INT           NULL,
    [receiveDate]       DATETIME      NULL,
    [receiveUserID]     INT           NULL,
    [rejectionDate]     DATETIME      NULL,
    [rejectionUserID]   INT           NULL,
    [rejectionReasonID] INT           NULL,
    [requestTypeID]     INT           NULL,
    [requestStatusID]   INT           NULL,
    [requestCalssID]    INT           NULL,
    [requestPriorityID] INT           NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [Lookups].[FK_UserID_UserGroup]...';


GO
ALTER TABLE [Lookups].[UserGroup]
    ADD CONSTRAINT [FK_UserID_UserGroup] FOREIGN KEY ([userId]) REFERENCES [Lookups].[User] ([Id]);


GO
PRINT N'Creating [Lookups].[FK_GroupID_UserGroup]...';


GO
ALTER TABLE [Lookups].[UserGroup]
    ADD CONSTRAINT [FK_GroupID_UserGroup] FOREIGN KEY ([groupId]) REFERENCES [Lookups].[Group] ([Id]);


GO
PRINT N'Creating [Lookups].[FK_FunctionID_GroupFunction]...';


GO
ALTER TABLE [Lookups].[GroupFunction]
    ADD CONSTRAINT [FK_FunctionID_GroupFunction] FOREIGN KEY ([functionId]) REFERENCES [Lookups].[Function] ([Id]);


GO
PRINT N'Creating [Lookups].[FK_GroupID_GroupFunction]...';


GO
ALTER TABLE [Lookups].[GroupFunction]
    ADD CONSTRAINT [FK_GroupID_GroupFunction] FOREIGN KEY ([groupId]) REFERENCES [Lookups].[Group] ([Id]);


GO
PRINT N'Creating [Transactions].[FK_CardTypeID_RequestDetail]...';


GO
ALTER TABLE [Transactions].[RequestDetail]
    ADD CONSTRAINT [FK_CardTypeID_RequestDetail] FOREIGN KEY ([cardTypeID]) REFERENCES [Lookups].[CardType] ([Id]);


GO
PRINT N'Creating [Transactions].[FK_RequestID_RequestDetail]...';


GO
ALTER TABLE [Transactions].[RequestDetail]
    ADD CONSTRAINT [FK_RequestID_RequestDetail] FOREIGN KEY ([requestID]) REFERENCES [Transactions].[Request] ([Id]);


GO
PRINT N'Creating [Transactions].[FK_WorkFieldId_Customer]...';


GO
ALTER TABLE [Transactions].[Customer]
    ADD CONSTRAINT [FK_WorkFieldId_Customer] FOREIGN KEY ([workFieldId]) REFERENCES [Lookups].[WorkField] ([Id]);


GO
PRINT N'Creating [Transactions].[FK_CustomerID_Request]...';


GO
ALTER TABLE [Transactions].[Request]
    ADD CONSTRAINT [FK_CustomerID_Request] FOREIGN KEY ([customerID]) REFERENCES [Transactions].[Customer] ([Id]);


GO
PRINT N'Creating [Transactions].[FK_CreationUserID_Request]...';


GO
ALTER TABLE [Transactions].[Request]
    ADD CONSTRAINT [FK_CreationUserID_Request] FOREIGN KEY ([creationUserID]) REFERENCES [Lookups].[User] ([Id]);


GO
PRINT N'Creating [Transactions].[FK_ApprovalUserID_Request]...';


GO
ALTER TABLE [Transactions].[Request]
    ADD CONSTRAINT [FK_ApprovalUserID_Request] FOREIGN KEY ([approvalUserID]) REFERENCES [Lookups].[User] ([Id]);


GO
PRINT N'Creating [Transactions].[FK_ReceiveUserID_Request]...';


GO
ALTER TABLE [Transactions].[Request]
    ADD CONSTRAINT [FK_ReceiveUserID_Request] FOREIGN KEY ([receiveUserID]) REFERENCES [Lookups].[User] ([Id]);


GO
PRINT N'Creating [Transactions].[FK_RejectionUserID_Request]...';


GO
ALTER TABLE [Transactions].[Request]
    ADD CONSTRAINT [FK_RejectionUserID_Request] FOREIGN KEY ([rejectionUserID]) REFERENCES [Lookups].[User] ([Id]);


GO
PRINT N'Creating [Transactions].[FK_RejectionReasonID_Request]...';


GO
ALTER TABLE [Transactions].[Request]
    ADD CONSTRAINT [FK_RejectionReasonID_Request] FOREIGN KEY ([rejectionReasonID]) REFERENCES [Lookups].[RejectReason] ([Id]);


GO
PRINT N'Creating [Transactions].[FK_RequestTypeID_Request]...';


GO
ALTER TABLE [Transactions].[Request]
    ADD CONSTRAINT [FK_RequestTypeID_Request] FOREIGN KEY ([requestTypeID]) REFERENCES [Lookups].[RequestType] ([Id]);


GO
PRINT N'Creating [Transactions].[FK_RequestStatusID_Request]...';


GO
ALTER TABLE [Transactions].[Request]
    ADD CONSTRAINT [FK_RequestStatusID_Request] FOREIGN KEY ([requestStatusID]) REFERENCES [Lookups].[RequestStatus] ([Id]);


GO
PRINT N'Creating [Transactions].[FK_RequestClassID_Request]...';


GO
ALTER TABLE [Transactions].[Request]
    ADD CONSTRAINT [FK_RequestClassID_Request] FOREIGN KEY ([requestCalssID]) REFERENCES [Lookups].[RequestClass] ([Id]);


GO
PRINT N'Creating [Transactions].[FK_RequestPriorityID_Request]...';


GO
ALTER TABLE [Transactions].[Request]
    ADD CONSTRAINT [FK_RequestPriorityID_Request] FOREIGN KEY ([requestPriorityID]) REFERENCES [Lookups].[RequestPriority] ([Id]);


GO
PRINT N'Creating [Lookups].[UpdateFunction]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/13 11:29:02 ص
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[UpdateFunction]
-- Description: Update Row Into [Lookups].[Function]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[UpdateFunction]
(
	@Id AS INT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60),
	@route AS NVARCHAR(MAX),
	@status AS BIT
)
AS
BEGIN

UPDATE [Lookups].[Function]
SET 
	 [name] = @name,
	 [nameAr] = @nameAr,
	 [route] = @route,
	 [status] = @status
WHERE	(@Id IS NULL OR [Function].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[SelectUserGroup]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/13 11:29:03 ص
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[SelectUserGroup]
-- Description: Select Row From [Lookups].[UserGroup]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[SelectUserGroup]
(
	@Id AS INT,
	@userId AS INT,
	@groupId AS INT
)
AS
BEGIN

SELECT 
	[UserGroup].[Id],
	[UserGroup].[userId],
	[UserGroup].[groupId]
FROM  [Lookups].[UserGroup]
WHERE	(@Id IS NULL OR [UserGroup].[Id] = @Id)
	AND (@userId IS NULL OR [UserGroup].[userId] = @userId)
	AND (@groupId IS NULL OR [UserGroup].[groupId] = @groupId)

END
GO
PRINT N'Creating [Lookups].[SelectUser]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/13 11:29:03 ص
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[SelectUser]
-- Description: Select Row From [Lookups].[User]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[SelectUser]
(
	@Id AS INT,
	@userName AS NVARCHAR(60),
	@fullName AS NVARCHAR(100),
	@createDate AS DATETIME
)
AS
BEGIN

SELECT 
	[User].[Id],
	[User].[userName],
	[User].[fullName],
	[User].[Password],
	[User].[status],
	[User].[createDate]
FROM  [Lookups].[User]
WHERE	(@Id IS NULL OR [User].[Id] = @Id)
	AND (@userName IS NULL OR [User].[userName] = @userName)
	AND (@fullName IS NULL OR [User].[fullName] = @fullName)
	AND (@createDate IS NULL OR [User].[createDate] = @createDate)

END
GO
PRINT N'Creating [Lookups].[SelectGroupFunction]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/13 11:29:02 ص
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[SelectGroupFunction]
-- Description: Select Row From [Lookups].[GroupFunction]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[SelectGroupFunction]
(
	@Id AS INT,
	@functionId AS INT,
	@groupId AS INT
)
AS
BEGIN

SELECT 
	[GroupFunction].[Id],
	[GroupFunction].[functionId],
	[GroupFunction].[groupId],
	[GroupFunction].[status]
FROM  [Lookups].[GroupFunction]
WHERE	(@Id IS NULL OR [GroupFunction].[Id] = @Id)
	AND (@functionId IS NULL OR [GroupFunction].[functionId] = @functionId)
	AND (@groupId IS NULL OR [GroupFunction].[groupId] = @groupId)

END
GO
PRINT N'Creating [Lookups].[SelectGroup]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/13 11:29:02 ص
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[SelectGroup]
-- Description: Select Row From [Lookups].[Group]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[SelectGroup]
(
	@Id AS INT,
	@name AS NVARCHAR(100)
)
AS
BEGIN

SELECT 
	[Group].[Id],
	[Group].[name],
	[Group].[status]
FROM  [Lookups].[Group]
WHERE	(@Id IS NULL OR [Group].[Id] = @Id)
	AND (@name IS NULL OR [Group].[name] = @name)

END
GO
PRINT N'Creating [Lookups].[SelectFunction]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/13 11:29:02 ص
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[SelectFunction]
-- Description: Select Row From [Lookups].[Function]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[SelectFunction]
(
	@Id AS INT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
)
AS
BEGIN

SELECT 
	[Function].[Id],
	[Function].[name],
	[Function].[nameAr],
	[Function].[route],
	[Function].[status]
FROM  [Lookups].[Function]
WHERE	(@Id IS NULL OR [Function].[Id] = @Id)
	AND (@name IS NULL OR [Function].[name] = @name)
	AND (@nameAr IS NULL OR [Function].[nameAr] = @nameAr)

END
GO
PRINT N'Creating [Lookups].[InsertUserGroup]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/13 11:29:03 ص
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[InsertUserGroup]
-- Description: Insert Row Into [Lookups].[UserGroup]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[InsertUserGroup]
(
	@Id AS INT OUTPUT,
	@userId AS INT,
	@groupId AS INT
)
AS
BEGIN

INSERT INTO [Lookups].[UserGroup]
(
	[userId],
	[groupId]
)
VALUES
(
	@userId,
	@groupId
)
SELECT @Id = SCOPE_IDENTITY()

END
GO
PRINT N'Creating [Lookups].[InsertUser]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/13 11:29:02 ص
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[InsertUser]
-- Description: Insert Row Into [Lookups].[User]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[InsertUser]
(
	@Id AS INT OUTPUT,
	@userName AS NVARCHAR(60),
	@fullName AS NVARCHAR(100),
	@Password AS NVARCHAR(60),
	@status AS BIT,
	@createDate AS DATETIME
)
AS
BEGIN

INSERT INTO [Lookups].[User]
(
	[userName],
	[fullName],
	[Password],
	[status],
	[createDate]
)
VALUES
(
	@userName,
	@fullName,
	@Password,
	@status,
	@createDate
)
SELECT @Id = SCOPE_IDENTITY()

END
GO
PRINT N'Creating [Lookups].[InsertGroupFunction]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/13 11:29:02 ص
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[InsertGroupFunction]
-- Description: Insert Row Into [Lookups].[GroupFunction]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[InsertGroupFunction]
(
	@Id AS INT OUTPUT,
	@functionId AS INT,
	@groupId AS INT,
	@status AS BIT
)
AS
BEGIN

INSERT INTO [Lookups].[GroupFunction]
(
	[functionId],
	[groupId],
	[status]
)
VALUES
(
	@functionId,
	@groupId,
	@status
)
SELECT @Id = SCOPE_IDENTITY()

END
GO
PRINT N'Creating [Lookups].[InsertGroup]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/13 11:29:02 ص
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[InsertGroup]
-- Description: Insert Row Into [Lookups].[Group]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[InsertGroup]
(
	@Id AS INT OUTPUT,
	@name AS NVARCHAR(100),
	@status AS BIT
)
AS
BEGIN

INSERT INTO [Lookups].[Group]
(
	[name],
	[status]
)
VALUES
(
	@name,
	@status
)
SELECT @Id = SCOPE_IDENTITY()

END
GO
PRINT N'Creating [Lookups].[InsertFunction]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/13 11:29:02 ص
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[InsertFunction]
-- Description: Insert Row Into [Lookups].[Function]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[InsertFunction]
(
	@Id AS INT OUTPUT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60),
	@route AS NVARCHAR(MAX),
	@status AS BIT
)
AS
BEGIN

INSERT INTO [Lookups].[Function]
(
	[name],
	[nameAr],
	[route],
	[status]
)
VALUES
(
	@name,
	@nameAr,
	@route,
	@status
)
SELECT @Id = SCOPE_IDENTITY()

END
GO
PRINT N'Creating [Lookups].[DeleteUserGroup]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/13 11:29:03 ص
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[DeleteUserGroup]
-- Description: Delete Row From [Lookups].[UserGroup]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[DeleteUserGroup]
(
	@Id AS INT
)
AS
BEGIN

DELETE [Lookups].[UserGroup]
WHERE	(@Id IS NULL OR [UserGroup].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[DeleteUser]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/13 11:29:03 ص
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[DeleteUser]
-- Description: Delete Row From [Lookups].[User]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[DeleteUser]
(
	@Id AS INT
)
AS
BEGIN

DELETE [Lookups].[User]
WHERE	(@Id IS NULL OR [User].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[DeleteGroupFunction]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/13 11:29:02 ص
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[DeleteGroupFunction]
-- Description: Delete Row From [Lookups].[GroupFunction]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[DeleteGroupFunction]
(
	@Id AS INT
)
AS
BEGIN

DELETE [Lookups].[GroupFunction]
WHERE	(@Id IS NULL OR [GroupFunction].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[DeleteGroup]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/13 11:29:02 ص
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[DeleteGroup]
-- Description: Delete Row From [Lookups].[Group]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[DeleteGroup]
(
	@Id AS INT
)
AS
BEGIN

DELETE [Lookups].[Group]
WHERE	(@Id IS NULL OR [Group].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[DeleteFunction]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/13 11:29:02 ص
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[DeleteFunction]
-- Description: Delete Row From [Lookups].[Function]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[DeleteFunction]
(
	@Id AS INT
)
AS
BEGIN

DELETE [Lookups].[Function]
WHERE	(@Id IS NULL OR [Function].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[DeleteRequestStatus]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:46 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[DeleteRequestStatus]
-- Description: Delete Row From [Lookups].[RequestStatus]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[DeleteRequestStatus]
(
	@Id AS INT
)
AS
BEGIN

DELETE [Lookups].[RequestStatus]
WHERE	(@Id IS NULL OR [RequestStatus].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[UpdateUserGroup]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/13 11:29:03 ص
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[UpdateUserGroup]
-- Description: Update Row Into [Lookups].[UserGroup]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[UpdateUserGroup]
(
	@Id AS INT,
	@userId AS INT,
	@groupId AS INT
)
AS
BEGIN

UPDATE [Lookups].[UserGroup]
SET 
	 [userId] = @userId,
	 [groupId] = @groupId
WHERE	(@Id IS NULL OR [UserGroup].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[UpdateUser]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/13 11:29:02 ص
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[UpdateUser]
-- Description: Update Row Into [Lookups].[User]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[UpdateUser]
(
	@Id AS INT,
	@userName AS NVARCHAR(60),
	@fullName AS NVARCHAR(100),
	@Password AS NVARCHAR(60),
	@status AS BIT,
	@createDate AS DATETIME
)
AS
BEGIN

UPDATE [Lookups].[User]
SET 
	 [userName] = @userName,
	 [fullName] = @fullName,
	 [Password] = @Password,
	 [status] = @status,
	 [createDate] = @createDate
WHERE	(@Id IS NULL OR [User].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[UpdateGroupFunction]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/13 11:29:02 ص
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[UpdateGroupFunction]
-- Description: Update Row Into [Lookups].[GroupFunction]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[UpdateGroupFunction]
(
	@Id AS INT,
	@functionId AS INT,
	@groupId AS INT,
	@status AS BIT
)
AS
BEGIN

UPDATE [Lookups].[GroupFunction]
SET 
	 [functionId] = @functionId,
	 [groupId] = @groupId,
	 [status] = @status
WHERE	(@Id IS NULL OR [GroupFunction].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[UpdateGroup]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/13 11:29:02 ص
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[UpdateGroup]
-- Description: Update Row Into [Lookups].[Group]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[UpdateGroup]
(
	@Id AS INT,
	@name AS NVARCHAR(100),
	@status AS BIT
)
AS
BEGIN

UPDATE [Lookups].[Group]
SET 
	 [name] = @name,
	 [status] = @status
WHERE	(@Id IS NULL OR [Group].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[DeleteRequestClass]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:45 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[DeleteRequestClass]
-- Description: Delete Row From [Lookups].[RequestClass]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[DeleteRequestClass]
(
	@Id AS INT
)
AS
BEGIN

DELETE [Lookups].[RequestClass]
WHERE	(@Id IS NULL OR [RequestClass].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[DeleteRejectReason]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:45 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[DeleteRejectReason]
-- Description: Delete Row From [Lookups].[RejectReason]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[DeleteRejectReason]
(
	@Id AS INT
)
AS
BEGIN

DELETE [Lookups].[RejectReason]
WHERE	(@Id IS NULL OR [RejectReason].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[DeleteCardValidity]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:44 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[DeleteCardValidity]
-- Description: Delete Row From [Lookups].[CardValidity]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[DeleteCardValidity]
(
	@Id AS INT
)
AS
BEGIN

DELETE [Lookups].[CardValidity]
WHERE	(@Id IS NULL OR [CardValidity].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[DeleteCardType]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:44 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[DeleteCardType]
-- Description: Delete Row From [Lookups].[CardType]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[DeleteCardType]
(
	@Id AS INT
)
AS
BEGIN

DELETE [Lookups].[CardType]
WHERE	(@Id IS NULL OR [CardType].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[UpdateWorkField]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:47 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[UpdateWorkField]
-- Description: Update Row Into [Lookups].[WorkField]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[UpdateWorkField]
(
	@Id AS INT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
)
AS
BEGIN

UPDATE [Lookups].[WorkField]
SET 
	 [name] = @name,
	 [nameAr] = @nameAr
WHERE	(@Id IS NULL OR [WorkField].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[UpdateRequestType]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:46 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[UpdateRequestType]
-- Description: Update Row Into [Lookups].[RequestType]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[UpdateRequestType]
(
	@Id AS INT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
)
AS
BEGIN

UPDATE [Lookups].[RequestType]
SET 
	 [name] = @name,
	 [nameAr] = @nameAr
WHERE	(@Id IS NULL OR [RequestType].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[UpdateRequestStatus]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:46 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[UpdateRequestStatus]
-- Description: Update Row Into [Lookups].[RequestStatus]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[UpdateRequestStatus]
(
	@Id AS INT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
)
AS
BEGIN

UPDATE [Lookups].[RequestStatus]
SET 
	 [name] = @name,
	 [nameAr] = @nameAr
WHERE	(@Id IS NULL OR [RequestStatus].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[SelectWorkField]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:47 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[SelectWorkField]
-- Description: Select Row From [Lookups].[WorkField]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[SelectWorkField]
(
	@Id AS INT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
)
AS
BEGIN

SELECT 
	[WorkField].[Id],
	[WorkField].[name],
	[WorkField].[nameAr]
FROM  [Lookups].[WorkField]
WHERE	(@Id IS NULL OR [WorkField].[Id] = @Id)
	AND (@name IS NULL OR [WorkField].[name] = @name)
	AND (@nameAr IS NULL OR [WorkField].[nameAr] = @nameAr)

END
GO
PRINT N'Creating [Lookups].[SelectRequestType]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:46 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[SelectRequestType]
-- Description: Select Row From [Lookups].[RequestType]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[SelectRequestType]
(
	@Id AS INT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
)
AS
BEGIN

SELECT 
	[RequestType].[Id],
	[RequestType].[name],
	[RequestType].[nameAr]
FROM  [Lookups].[RequestType]
WHERE	(@Id IS NULL OR [RequestType].[Id] = @Id)
	AND (@name IS NULL OR [RequestType].[name] = @name)
	AND (@nameAr IS NULL OR [RequestType].[nameAr] = @nameAr)

END
GO
PRINT N'Creating [Lookups].[SelectRequestStatus]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:46 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[SelectRequestStatus]
-- Description: Select Row From [Lookups].[RequestStatus]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[SelectRequestStatus]
(
	@Id AS INT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
)
AS
BEGIN

SELECT 
	[RequestStatus].[Id],
	[RequestStatus].[name],
	[RequestStatus].[nameAr]
FROM  [Lookups].[RequestStatus]
WHERE	(@Id IS NULL OR [RequestStatus].[Id] = @Id)
	AND (@name IS NULL OR [RequestStatus].[name] = @name)
	AND (@nameAr IS NULL OR [RequestStatus].[nameAr] = @nameAr)

END
GO
PRINT N'Creating [Lookups].[InsertWorkField]...';


GO

--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:47 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[InsertWorkField]
-- Description: Insert Row Into [Lookups].[WorkField]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[InsertWorkField]
(
	@Id AS INT OUTPUT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
) AS
BEGIN

INSERT INTO [Lookups].[WorkField]
(
	[name],
	[nameAr]
)
VALUES
(
	@name,
	@nameAr
)
SELECT @Id = SCOPE_IDENTITY()

END
GO
PRINT N'Creating [Lookups].[InsertRequestType]...';


GO

--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:46 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[InsertRequestType]
-- Description: Insert Row Into [Lookups].[RequestType]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[InsertRequestType]
(
	@Id AS INT OUTPUT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
)
 AS
BEGIN

INSERT INTO [Lookups].[RequestType]
(
	[name],
	[nameAr]
)
VALUES
(
	@name,
	@nameAr
)
SELECT @Id = SCOPE_IDENTITY()

END
GO
PRINT N'Creating [Lookups].[InsertRequestStatus]...';


GO

--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:46 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[InsertRequestStatus]
-- Description: Insert Row Into [Lookups].[RequestStatus]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[InsertRequestStatus]
(
	@Id AS INT OUTPUT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
)
 AS
BEGIN

INSERT INTO [Lookups].[RequestStatus]
(
	[name],
	[nameAr]
)
VALUES
(
	@name,
	@nameAr
)
SELECT @Id = SCOPE_IDENTITY()

END
GO
PRINT N'Creating [Lookups].[DeleteWorkField]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:47 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[DeleteWorkField]
-- Description: Delete Row From [Lookups].[WorkField]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[DeleteWorkField]
(
	@Id AS INT
)
AS
BEGIN

DELETE [Lookups].[WorkField]
WHERE	(@Id IS NULL OR [WorkField].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[DeleteRequestType]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:46 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[DeleteRequestType]
-- Description: Delete Row From [Lookups].[RequestType]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[DeleteRequestType]
(
	@Id AS INT
)
AS
BEGIN

DELETE [Lookups].[RequestType]
WHERE	(@Id IS NULL OR [RequestType].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[UpdateRequestPriority]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:45 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[UpdateRequestPriority]
-- Description: Update Row Into [Lookups].[RequestPriority]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[UpdateRequestPriority]
(
	@Id AS INT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
)
AS
BEGIN

UPDATE [Lookups].[RequestPriority]
SET 
	 [name] = @name,
	 [nameAr] = @nameAr
WHERE	(@Id IS NULL OR [RequestPriority].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[UpdateRequestClass]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:45 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[UpdateRequestClass]
-- Description: Update Row Into [Lookups].[RequestClass]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[UpdateRequestClass]
(
	@Id AS INT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
)
AS
BEGIN

UPDATE [Lookups].[RequestClass]
SET 
	 [name] = @name,
	 [nameAr] = @nameAr
WHERE	(@Id IS NULL OR [RequestClass].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[UpdateRejectReason]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:45 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[UpdateRejectReason]
-- Description: Update Row Into [Lookups].[RejectReason]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[UpdateRejectReason]
(
	@Id AS INT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
)
AS
BEGIN

UPDATE [Lookups].[RejectReason]
SET 
	 [name] = @name,
	 [nameAr] = @nameAr
WHERE	(@Id IS NULL OR [RejectReason].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[UpdateCardValidity]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:44 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[UpdateCardValidity]
-- Description: Update Row Into [Lookups].[CardValidity]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[UpdateCardValidity]
(
	@Id AS INT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
)
AS
BEGIN

UPDATE [Lookups].[CardValidity]
SET 
	 [name] = @name,
	 [nameAr] = @nameAr
WHERE	(@Id IS NULL OR [CardValidity].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[UpdateCardType]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:44 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[UpdateCardType]
-- Description: Update Row Into [Lookups].[CardType]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[UpdateCardType]
(
	@Id AS INT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
)
AS
BEGIN

UPDATE [Lookups].[CardType]
SET 
	 [name] = @name,
	 [nameAr] = @nameAr
WHERE	(@Id IS NULL OR [CardType].[Id] = @Id)

END
GO
PRINT N'Creating [Lookups].[SelectRequestPriority]...';


GO

--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:45 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[SelectRequestPriority]
-- Description: Select Row From [Lookups].[RequestPriority]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[SelectRequestPriority]
(
	@Id AS INT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
)
 AS
BEGIN

SELECT 
	[RequestPriority].[Id],
	[RequestPriority].[name],
	[RequestPriority].[nameAr]
FROM  [Lookups].[RequestPriority]
WHERE	(@Id IS NULL OR [RequestPriority].[Id] = @Id)
	AND (@name IS NULL OR [RequestPriority].[name] = @name)
	AND (@nameAr IS NULL OR [RequestPriority].[nameAr] = @nameAr)

END
GO
PRINT N'Creating [Lookups].[SelectRequestClass]...';


GO

--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:45 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[SelectRequestClass]
-- Description: Select Row From [Lookups].[RequestClass]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[SelectRequestClass]
(
	@Id AS INT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
)
AS
BEGIN

SELECT 
	[RequestClass].[Id],
	[RequestClass].[name],
	[RequestClass].[nameAr]
FROM  [Lookups].[RequestClass]
WHERE	(@Id IS NULL OR [RequestClass].[Id] = @Id)
	AND (@name IS NULL OR [RequestClass].[name] = @name)
	AND (@nameAr IS NULL OR [RequestClass].[nameAr] = @nameAr)

END
GO
PRINT N'Creating [Lookups].[SelectRejectReason]...';


GO

--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:45 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[SelectRejectReason]
-- Description: Select Row From [Lookups].[RejectReason]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[SelectRejectReason]
(
	@Id AS INT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
)
 AS
BEGIN

SELECT 
	[RejectReason].[Id],
	[RejectReason].[name],
	[RejectReason].[nameAr]
FROM  [Lookups].[RejectReason]
WHERE	(@Id IS NULL OR [RejectReason].[Id] = @Id)
	AND (@name IS NULL OR [RejectReason].[name] = @name)
	AND (@nameAr IS NULL OR [RejectReason].[nameAr] = @nameAr)

END
GO
PRINT N'Creating [Lookups].[SelectCardValidity]...';


GO

--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:44 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[SelectCardValidity]
-- Description: Select Row From [Lookups].[CardValidity]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[SelectCardValidity]
(
	@Id AS INT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
)
AS
BEGIN

SELECT 
	[CardValidity].[Id],
	[CardValidity].[name],
	[CardValidity].[nameAr]
FROM  [Lookups].[CardValidity]
WHERE	(@Id IS NULL OR [CardValidity].[Id] = @Id)
	AND (@name IS NULL OR [CardValidity].[name] = @name)
	AND (@nameAr IS NULL OR [CardValidity].[nameAr] = @nameAr)

END
GO
PRINT N'Creating [Lookups].[SelectCardType]...';


GO

--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:44 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[SelectCardType]
-- Description: Select Row From [Lookups].[CardType]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[SelectCardType]
(
	@Id AS INT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
)
 AS
BEGIN

SELECT 
	[CardType].[Id],
	[CardType].[name],
	[CardType].[nameAr]
FROM  [Lookups].[CardType]
WHERE	(@Id IS NULL OR [CardType].[Id] = @Id)
	AND (@name IS NULL OR [CardType].[name] = @name)
	AND (@nameAr IS NULL OR [CardType].[nameAr] = @nameAr)

END
GO
PRINT N'Creating [Lookups].[InsertRequestPriority]...';


GO

--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:45 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[InsertRequestPriority]
-- Description: Insert Row Into [Lookups].[RequestPriority]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[InsertRequestPriority]
(
	@Id AS INT OUTPUT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
)
 AS
BEGIN

INSERT INTO [Lookups].[RequestPriority]
(
	[name],
	[nameAr]
)
VALUES
(
	@name,
	@nameAr
)
SELECT @Id = SCOPE_IDENTITY()

END
GO
PRINT N'Creating [Lookups].[InsertRequestClass]...';


GO

--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:45 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[InsertRequestClass]
-- Description: Insert Row Into [Lookups].[RequestClass]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[InsertRequestClass]
(
	@Id AS INT OUTPUT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
)
 AS
BEGIN

INSERT INTO [Lookups].[RequestClass]
(
	[name],
	[nameAr]
)
VALUES
(
	@name,
	@nameAr
)
SELECT @Id = SCOPE_IDENTITY()

END
GO
PRINT N'Creating [Lookups].[InsertRejectReason]...';


GO

--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:45 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[InsertRejectReason]
-- Description: Insert Row Into [Lookups].[RejectReason]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[InsertRejectReason]
(
	@Id AS INT OUTPUT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
)AS
BEGIN

INSERT INTO [Lookups].[RejectReason]
(
	[name],
	[nameAr]
)
VALUES
(
	@name,
	@nameAr
)
SELECT @Id = SCOPE_IDENTITY()

END
GO
PRINT N'Creating [Lookups].[InsertCardValidity]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:44 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[InsertCardValidity]
-- Description: Insert Row Into [Lookups].[CardValidity]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[InsertCardValidity]
(
	@Id AS INT OUTPUT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
)
AS
BEGIN

INSERT INTO [Lookups].[CardValidity]
(
	[name],
	[nameAr]
)
VALUES
(
	@name,
	@nameAr
)
SELECT @Id = SCOPE_IDENTITY()

END
GO
PRINT N'Creating [Lookups].[InsertCardType]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:44 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[InsertCardType]
-- Description: Insert Row Into [Lookups].[CardType]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[InsertCardType]
(
	@Id AS INT OUTPUT,
	@name AS NVARCHAR(60),
	@nameAr AS NVARCHAR(60)
)
AS
BEGIN

INSERT INTO [Lookups].[CardType]
(
	[name],
	[nameAr]
)
VALUES
(
	@name,
	@nameAr
)
SELECT @Id = SCOPE_IDENTITY()

END
GO
PRINT N'Creating [Lookups].[DeleteRequestPriority]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:45 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Lookups].[DeleteRequestPriority]
-- Description: Delete Row From [Lookups].[RequestPriority]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Lookups].[DeleteRequestPriority]
(
	@Id AS INT
)
AS
BEGIN

DELETE [Lookups].[RequestPriority]
WHERE	(@Id IS NULL OR [RequestPriority].[Id] = @Id)

END
GO
PRINT N'Creating [Transactions].[DeleteRequest]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:47 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Transactions].[DeleteRequest]
-- Description: Delete Row From [Transactions].[Request]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Transactions].[DeleteRequest]
(
	@Id AS INT
)
AS
BEGIN

DELETE [Transactions].[Request]
WHERE	(@Id IS NULL OR [Request].[Id] = @Id)

END
GO
PRINT N'Creating [Transactions].[DeleteCustomer]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:47 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Transactions].[DeleteCustomer]
-- Description: Delete Row From [Transactions].[Customer]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Transactions].[DeleteCustomer]
(
	@Id AS INT
)
AS
BEGIN

DELETE [Transactions].[Customer]
WHERE	(@Id IS NULL OR [Customer].[Id] = @Id)

END
GO
PRINT N'Creating [Transactions].[UpdateRequestDetail]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:48 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Transactions].[UpdateRequestDetail]
-- Description: Update Row Into [Transactions].[RequestDetail]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Transactions].[UpdateRequestDetail]
(
	@Id AS INT,
	@quantity AS INT,
	@cardTypeID AS INT,
	@requestID AS INT
)
AS
BEGIN

UPDATE [Transactions].[RequestDetail]
SET 
	 [quantity] = @quantity,
	 [cardTypeID] = @cardTypeID,
	 [requestID] = @requestID
WHERE	(@Id IS NULL OR [RequestDetail].[Id] = @Id)

END
GO
PRINT N'Creating [Transactions].[SelectRequestDetail]...';


GO

--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:48 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Transactions].[SelectRequestDetail]
-- Description: Select Row From [Transactions].[RequestDetail]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Transactions].[SelectRequestDetail]
(
	@Id AS INT,
	@cardTypeID AS INT,
	@requestID AS INT
)
AS
BEGIN

SELECT 
	[RequestDetail].[Id],
	[RequestDetail].[quantity],
	[RequestDetail].[cardTypeID],
	[RequestDetail].[requestID]
FROM  [Transactions].[RequestDetail]
WHERE	(@Id IS NULL OR [RequestDetail].[Id] = @Id)
	AND (@cardTypeID IS NULL OR [RequestDetail].[cardTypeID] = @cardTypeID)
	AND (@requestID IS NULL OR [RequestDetail].[requestID] = @requestID)

END
GO
PRINT N'Creating [Transactions].[DeleteRequestDetail]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:48 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Transactions].[DeleteRequestDetail]
-- Description: Delete Row From [Transactions].[RequestDetail]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Transactions].[DeleteRequestDetail]
(
	@Id AS INT
)
AS
BEGIN

DELETE [Transactions].[RequestDetail]
WHERE	(@Id IS NULL OR [RequestDetail].[Id] = @Id)

END
GO
PRINT N'Creating [Transactions].[UpdateRequest]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:47 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Transactions].[UpdateRequest]
-- Description: Update Row Into [Transactions].[Request]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Transactions].[UpdateRequest]
(
	@Id AS INT,
	@requestNumber AS NVARCHAR(20),
	@totalQuantity AS INT,
	@PDD AS DATETIME,
	@customerID AS INT,
	@creationDate AS DATETIME,
	@creationUserID AS INT,
	@approvalDate AS DATETIME,
	@approvalUserID AS INT,
	@receiveDate AS DATETIME,
	@receiveUserID AS INT,
	@rejectionDate AS DATETIME,
	@rejectionUserID AS INT,
	@rejectionReasonID AS INT,
	@requestTypeID AS INT,
	@requestStatusID AS INT,
	@requestCalssID AS INT,
	@requestPriorityID AS INT
)
AS
BEGIN

UPDATE [Transactions].[Request]
SET 
	 [requestNumber] = @requestNumber,
	 [totalQuantity] = @totalQuantity,
	 [PDD] = @PDD,
	 [customerID] = @customerID,
	 [creationDate] = @creationDate,
	 [creationUserID] = @creationUserID,
	 [approvalDate] = @approvalDate,
	 [approvalUserID] = @approvalUserID,
	 [receiveDate] = @receiveDate,
	 [receiveUserID] = @receiveUserID,
	 [rejectionDate] = @rejectionDate,
	 [rejectionUserID] = @rejectionUserID,
	 [rejectionReasonID] = @rejectionReasonID,
	 [requestTypeID] = @requestTypeID,
	 [requestStatusID] = @requestStatusID,
	 [requestCalssID] = @requestCalssID,
	 [requestPriorityID] = @requestPriorityID
WHERE	(@Id IS NULL OR [Request].[Id] = @Id)

END
GO
PRINT N'Creating [Transactions].[UpdateCustomer]...';


GO
--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:47 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Transactions].[UpdateCustomer]
-- Description: Update Row Into [Transactions].[Customer]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Transactions].[UpdateCustomer]
(
	@Id AS INT,
	@code AS NVARCHAR(60),
	@name AS NVARCHAR(200),
	@nameAr AS NVARCHAR(200),
	@address AS NVARCHAR(200),
	@phone AS NVARCHAR(40),
	@email AS NVARCHAR(200),
	@workFieldId AS INT
)
AS
BEGIN

UPDATE [Transactions].[Customer]
SET 
	 [code] = @code,
	 [name] = @name,
	 [nameAr] = @nameAr,
	 [address] = @address,
	 [phone] = @phone,
	 [email] = @email,
	 [workFieldId] = @workFieldId
WHERE	(@Id IS NULL OR [Customer].[Id] = @Id)

END
GO
PRINT N'Creating [Transactions].[SelectRequest]...';


GO

--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:47 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Transactions].[SelectRequest]
-- Description: Select Row From [Transactions].[Request]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Transactions].[SelectRequest]
(
	@Id AS INT,
	@requestNumber AS NVARCHAR(20),
	@customerID AS INT,
	@creationDate AS DATETIME,
	@creationUserID AS INT,
	@approvalDate AS DATETIME,
	@approvalUserID AS INT,
	@receiveDate AS DATETIME,
	@receiveUserID AS INT,
	@rejectionDate AS DATETIME,
	@rejectionUserID AS INT,
	@rejectionReasonID AS INT,
	@requestTypeID AS INT,
	@requestStatusID AS INT,
	@requestCalssID AS INT,
	@requestPriorityID AS INT
)

AS
BEGIN

SELECT 
	[Request].[Id],
	[Request].[requestNumber],
	[Request].[totalQuantity],
	[Request].[PDD],
	[Request].[customerID],
	[Request].[creationDate],
	[Request].[creationUserID],
	[Request].[approvalDate],
	[Request].[approvalUserID],
	[Request].[receiveDate],
	[Request].[receiveUserID],
	[Request].[rejectionDate],
	[Request].[rejectionUserID],
	[Request].[rejectionReasonID],
	[Request].[requestTypeID],
	[Request].[requestStatusID],
	[Request].[requestCalssID],
	[Request].[requestPriorityID]
FROM  [Transactions].[Request]
WHERE	(@Id IS NULL OR [Request].[Id] = @Id)
	AND (@requestNumber IS NULL OR [Request].[requestNumber] = @requestNumber)
	AND (@customerID IS NULL OR [Request].[customerID] = @customerID)
	AND (@creationDate IS NULL OR [Request].[creationDate] = @creationDate)
	AND (@creationUserID IS NULL OR [Request].[creationUserID] = @creationUserID)
	AND (@approvalDate IS NULL OR [Request].[approvalDate] = @approvalDate)
	AND (@approvalUserID IS NULL OR [Request].[approvalUserID] = @approvalUserID)
	AND (@receiveDate IS NULL OR [Request].[receiveDate] = @receiveDate)
	AND (@receiveUserID IS NULL OR [Request].[receiveUserID] = @receiveUserID)
	AND (@rejectionDate IS NULL OR [Request].[rejectionDate] = @rejectionDate)
	AND (@rejectionUserID IS NULL OR [Request].[rejectionUserID] = @rejectionUserID)
	AND (@rejectionReasonID IS NULL OR [Request].[rejectionReasonID] = @rejectionReasonID)
	AND (@requestTypeID IS NULL OR [Request].[requestTypeID] = @requestTypeID)
	AND (@requestStatusID IS NULL OR [Request].[requestStatusID] = @requestStatusID)
	AND (@requestCalssID IS NULL OR [Request].[requestCalssID] = @requestCalssID)
	AND (@requestPriorityID IS NULL OR [Request].[requestPriorityID] = @requestPriorityID)

END
GO
PRINT N'Creating [Transactions].[SelectCustomer]...';


GO

--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:47 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Transactions].[SelectCustomer]
-- Description: Select Row From [Transactions].[Customer]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Transactions].[SelectCustomer]
(
	@Id AS INT,
	@code AS NVARCHAR(60),
	@name AS NVARCHAR(200),
	@nameAr AS NVARCHAR(200),
	@workFieldId AS INT
)
AS
BEGIN

SELECT 
	[Customer].[Id],
	[Customer].[code],
	[Customer].[name],
	[Customer].[nameAr],
	[Customer].[address],
	[Customer].[phone],
	[Customer].[email],
	[Customer].[workFieldId]
FROM  [Transactions].[Customer]
WHERE	(@Id IS NULL OR [Customer].[Id] = @Id)
	AND (@code IS NULL OR [Customer].[code] = @code)
	AND (@name IS NULL OR [Customer].[name] = @name)
	AND (@nameAr IS NULL OR [Customer].[nameAr] = @nameAr)
	AND (@workFieldId IS NULL OR [Customer].[workFieldId] = @workFieldId)

END
GO
PRINT N'Creating [Transactions].[InsertRequestDetail]...';


GO

--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:47 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Transactions].[InsertRequestDetail]
-- Description: Insert Row Into [Transactions].[RequestDetail]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Transactions].[InsertRequestDetail]
(
	@Id AS INT OUTPUT,
	@quantity AS INT,
	@cardTypeID AS INT,
	@requestID AS INT
)
 AS
BEGIN

INSERT INTO [Transactions].[RequestDetail]
(
	[quantity],
	[cardTypeID],
	[requestID]
)
VALUES
(
	@quantity,
	@cardTypeID,
	@requestID
)
SELECT @Id = SCOPE_IDENTITY()

END
GO
PRINT N'Creating [Transactions].[InsertRequest]...';


GO

--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:47 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Transactions].[InsertRequest]
-- Description: Insert Row Into [Transactions].[Request]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Transactions].[InsertRequest]
(
	@Id AS INT OUTPUT,
	@requestNumber AS NVARCHAR(20),
	@totalQuantity AS INT,
	@PDD AS DATETIME,
	@customerID AS INT,
	@creationDate AS DATETIME,
	@creationUserID AS INT,
	@approvalDate AS DATETIME,
	@approvalUserID AS INT,
	@receiveDate AS DATETIME,
	@receiveUserID AS INT,
	@rejectionDate AS DATETIME,
	@rejectionUserID AS INT,
	@rejectionReasonID AS INT,
	@requestTypeID AS INT,
	@requestStatusID AS INT,
	@requestCalssID AS INT,
	@requestPriorityID AS INT
)
 AS
BEGIN

INSERT INTO [Transactions].[Request]
(
	[requestNumber],
	[totalQuantity],
	[PDD],
	[customerID],
	[creationDate],
	[creationUserID],
	[approvalDate],
	[approvalUserID],
	[receiveDate],
	[receiveUserID],
	[rejectionDate],
	[rejectionUserID],
	[rejectionReasonID],
	[requestTypeID],
	[requestStatusID],
	[requestCalssID],
	[requestPriorityID]
)
VALUES
(
	@requestNumber,
	@totalQuantity,
	@PDD,
	@customerID,
	@creationDate,
	@creationUserID,
	@approvalDate,
	@approvalUserID,
	@receiveDate,
	@receiveUserID,
	@rejectionDate,
	@rejectionUserID,
	@rejectionReasonID,
	@requestTypeID,
	@requestStatusID,
	@requestCalssID,
	@requestPriorityID
)
SELECT @Id = SCOPE_IDENTITY()

END
GO
PRINT N'Creating [Transactions].[InsertCustomer]...';


GO

--------------------------------------------------------------------------------------------------------------------
-- Created By   : 
-- Created Date : 2019/11/19 04:32:47 م
--------------------Change History----------------------------------------------------------------------------------
-- Change No     Date		Time	Author					Descrition
--------------------Change History----------------------------------------------------------------------------------
-- Name       : [Transactions].[InsertCustomer]
-- Description: Insert Row Into [Transactions].[Customer]
--------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [Transactions].[InsertCustomer]
(
	@Id AS INT OUTPUT,
	@code AS NVARCHAR(60),
	@name AS NVARCHAR(200),
	@nameAr AS NVARCHAR(200),
	@address AS NVARCHAR(200),
	@phone AS NVARCHAR(40),
	@email AS NVARCHAR(200),
	@workFieldId AS INT
)
 AS
BEGIN

INSERT INTO [Transactions].[Customer]
(
	[code],
	[name],
	[nameAr],
	[address],
	[phone],
	[email],
	[workFieldId]
)
VALUES
(
	@code,
	@name,
	@nameAr,
	@address,
	@phone,
	@email,
	@workFieldId
)
SELECT @Id = SCOPE_IDENTITY()

END
GO
/*
Post-Deployment Script Template							
--------------------------------------------------------------------------------------
 This file contains SQL statements that will be appended to the build script.		
 Use SQLCMD syntax to include a file in the post-deployment script.			
 Example:      :r .\myfile.sql								
 Use SQLCMD syntax to reference a variable in the post-deployment script.		
 Example:      :setvar TableName MyTable							
               SELECT * FROM [$(TableName)]					
--------------------------------------------------------------------------------------
*/

CREATE UNIQUE NONCLUSTERED INDEX [Code_Unique] ON [Transactions].[Customer] ([code] ASC)
WHERE ([code] IS NOT NULL)
WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
GO

GO
DECLARE @VarDecimalSupported AS BIT;

SELECT @VarDecimalSupported = 0;

IF ((ServerProperty(N'EngineEdition') = 3)
    AND (((@@microsoftversion / power(2, 24) = 9)
          AND (@@microsoftversion & 0xffff >= 3024))
         OR ((@@microsoftversion / power(2, 24) = 10)
             AND (@@microsoftversion & 0xffff >= 1600))))
    SELECT @VarDecimalSupported = 1;

IF (@VarDecimalSupported > 0)
    BEGIN
        EXECUTE sp_db_vardecimal_storage_format N'$(DatabaseName)', 'ON';
    END


GO
PRINT N'Update complete.';


GO
